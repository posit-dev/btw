% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/tool-agent-custom.R
\name{btw_agent_tool}
\alias{btw_agent_tool}
\title{Create a custom agent tool from a markdown file}
\usage{
btw_agent_tool(path)
}
\arguments{
\item{path}{Path to an agent markdown file (\verb{agent-*.md}).}
}
\value{
An \code{ellmer::ToolDef} object that can be registered with a chat
client, or \code{NULL} if the file is invalid (with a warning).
}
\description{
Creates an \code{\link[ellmer:tool]{ellmer::tool()}} from a markdown file that defines a custom agent.
The tool can be registered with a chat client to delegate tasks to a
specialized assistant with its own system prompt and tool configuration.
\subsection{Agent File Format}{

Agent files use YAML frontmatter to configure the agent, with the markdown
body becoming the agent's system prompt. The file should be named
\verb{agent-\{name\}.md}.
\subsection{Required Fields}{
\itemize{
\item \code{name}: A valid R identifier (letters, numbers, underscores) that becomes
part of the tool name. Cannot be \code{"subagent"} (reserved).
}
}

\subsection{Optional Fields}{
\itemize{
\item \code{description}: Tool description shown to the LLM. Defaults to a generic
delegation message.
\item \code{title}: User-facing title for the tool. Defaults to title-cased name.
\item \code{icon}: Font Awesome icon name (e.g., \code{"robot"}, \code{"code"}). Defaults to
the standard agent icon.
\item \code{client}: Model specification like \code{"anthropic/claude-sonnet-4-20250514"}.
Falls back to \code{btw.subagent.client} or \code{btw.client} options.
\item \code{tools}: List of tool names or groups available to this agent. Defaults to
all non-agent tools.
}
}

\subsection{Example Agent File}{

\if{html}{\out{<div class="sourceCode yaml">}}\preformatted{---
name: code_reviewer
description: Reviews code for best practices and potential issues.
title: Code Reviewer
icon: magnifying-glass-chart
tools:
  - files
  - docs
---

You are a code reviewer. Analyze code for:
- Best practices and style
- Potential bugs or issues
- Performance considerations

Provide specific, actionable feedback.
}\if{html}{\out{</div>}}
}

}

\subsection{Automatic Discovery}{

Agent files are automatically discovered by \code{\link[=btw_tools]{btw_tools()}} when placed in:
\itemize{
\item \strong{Project level}: \verb{.btw/agent-*.md} in your project directory
\item \strong{User level}: \verb{~/.btw/agent-*.md} or \verb{~/.config/btw/agent-*.md}
}

Project-level agents take precedence over user-level agents with the same
name.
}
}
\examples{
\dontrun{
# Create a tool from a specific agent file
tool <- btw_agent_tool("path/to/agent-reviewer.md")

# Register with a chat client
chat <- ellmer::chat_anthropic()
chat$register_tool(tool)

# Or include with other btw tools
chat$register_tools(c(btw_tools("docs"), tool))
}

}
\seealso{
\code{\link[=btw_tools]{btw_tools()}} for automatic agent discovery, \code{\link[=btw_client]{btw_client()}} for
creating chat clients with tools.
}
