% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/tool-run.R
\name{btw_tool_run_r}
\alias{btw_tool_run_r}
\title{Tool: Run R code}
\usage{
btw_tool_run_r(code, `_intent` = "")
}
\arguments{
\item{code}{A character string containing R code to run.}

\item{_intent}{Intent description (automatically added by ellmer).}
}
\value{
A list of ellmer Content objects:
\itemize{
\item \code{ContentText}: visible return values and text output
\item \code{ContentMessage}: messages from \code{message()}
\item \code{ContentWarning}: warnings from \code{warning()}
\item \code{ContentError}: errors from \code{stop()}
\item \code{ContentImageInline}: plots created during execution
}
}
\description{
\ifelse{html}{\href{https://lifecycle.r-lib.org/articles/stages.html#experimental}{\figure{lifecycle-experimental.svg}{options: alt='[Experimental]'}}}{\strong{[Experimental]}}
This tool runs R code and returns results as a list of \code{\link[ellmer:Content]{ellmer::Content()}}
objects. It captures text output, plots, messages, warnings, and errors. Code
execution stops on the first error, returning all results up to that point.
}
\section{Security Considerations}{

Executing arbitrary R code can pose significant security risks, especially
in shared or multi-user environments. Furthermore, neither \pkg{shinychat}
(as of v0.4.0) or nor \pkg{ellmer} (as of v0.4.0) provide a mechanism to
review and reject the code before execution. Even more, the code is executed
in the global environment and does not have any sandboxing or R code
limitations applied.

It is your responsibility to ensure that you are taking appropriate measures
to reduce the risk of the LLM writing arbitrary code. Most often, this means
not prompting the model to take large or potentially destructive actions.
At this time, we do not recommend that you enable this tool in a publicly-
available environment without strong safeguards in place.

That said, this tool is very powerful and can greatly enhance the
capabilities of your btw chatbots. Please use it responsibly! If you'd like
to enable the tool, please read the instructions below.
}

\section{Enabling this tool}{

This tool is not enabled by default in \code{\link[=btw_tools]{btw_tools()}}, \code{\link[=btw_app]{btw_app()}} or
\code{\link[=btw_client]{btw_client()}}. To enable the function, you have a few options:
\enumerate{
\item Set the \code{btw.run_r.enabled} option to \code{TRUE} in your R session, or in your
\code{.Rprofile} file to enable it globally.
\item Set the \code{BTW_RUN_R_ENABLED} environment variable to \code{true} in your
\code{.Renviron} file or your system environment.
\item Explicitly include the tool when calling \code{btw_tools("run")} (unless the
above options disable it).
}

In your \link[=use_btw_md]{btw.md file}, you can explicitly enable the tool by
naming it in the tools option

\if{html}{\out{<div class="sourceCode md">}}\preformatted{---
tools:
  - run_r
---
}\if{html}{\out{</div>}}

or you can enable the tool by setting the \code{btw.run_r.enabled} option from the
\code{options} list in \code{btw.md} (this approach is useful if you've globally
disabled the tool but want to enable it for a specific btw chat):

\if{html}{\out{<div class="sourceCode md">}}\preformatted{---
options:
  run_r:
    enabled: true
---
}\if{html}{\out{</div>}}
}

\examples{
\dontrun{
# Simple calculation
btw_tool_run_r("2 + 2")

# Code with plot
btw_tool_run_r("hist(rnorm(100))")

# Code with warning
btw_tool_run_r("mean(c(1, 2, NA))")
}

}
\seealso{
\code{\link[=btw_tools]{btw_tools()}}

Other Tools: 
\code{\link{btw_tool_docs_package_news}()},
\code{\link{btw_tool_env_describe_data_frame}()},
\code{\link{btw_tool_env_describe_environment}()},
\code{\link{btw_tool_files_code_search}()},
\code{\link{btw_tool_files_list_files}()},
\code{\link{btw_tool_files_read_text_file}()},
\code{\link{btw_tool_files_write_text_file}()},
\code{\link{btw_tool_ide_read_current_editor}()},
\code{\link{btw_tool_package_docs}},
\code{\link{btw_tool_search_packages}()},
\code{\link{btw_tool_session_package_info}()},
\code{\link{btw_tool_session_platform_info}()},
\code{\link{btw_tool_web_read_url}()},
\code{\link{btw_tools}()}
}
\concept{Tools}
