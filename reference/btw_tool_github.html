<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Tool: GitHub — btw_tool_github • btw</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Tool: GitHub — btw_tool_github"><meta name="description" content='Execute R code that calls the GitHub API using gh::gh().
This tool is
designed such that models can write very limited R code to call gh::gh()
and protections are inserted to prevent the model from calling unsafe or
destructive actions via the API. The Endpoint Validation section below
describes how API endpoints are validated to ensure safety.
While this tool can execute R code, the code is evaluated in an environment
where only a limited set of functions and variables are available. In
particular, only the gh() and gh_whoami() functions from the gh package
are available, along with owner and repo variables that are pre-defined
to point to the current repository (if detected). This allows models to focus
on writing GitHub API calls without needing to load packages or manage
authentication.
Endpoint Validation


This tool uses endpoint validation to ensure only safe GitHub API operations
are performed. By default, most read operations and low-risk write operations
(like creating issues or PRs) are allowed, while dangerous operations (like
merging PRs or deleting repositories) are blocked.
To customize which endpoints are allowed or blocked, use the
btw.github.allow and btw.github.block options:
# Allow a specific endpoint
options(btw.github.allow = c(
  getOption("btw.github.allow"),
  "GET /repos/*/*/topics"
))

# Block a specific endpoint
options(btw.github.block = c(
  getOption("btw.github.block"),
  "GET /repos/*/*/branches"
))

You can also set these options in your btw.md file under the
options field:
tools: github
options:
  github:
    allow:
      - "PATCH /repos/*/*/pulls/*" # Allow converting PRs to/from draft
      - "POST /repos/*/*/git/refs" # Allow creating branches
    block:
      - "DELETE /repos/**" # Block any delete action under /repos

The precedence order for rules is:
User block rules (checked first, highest priority)
User allow rules
Built-in block rules
Built-in allow rules
Default: reject (if no rules match)



'><meta property="og:description" content='Execute R code that calls the GitHub API using gh::gh().
This tool is
designed such that models can write very limited R code to call gh::gh()
and protections are inserted to prevent the model from calling unsafe or
destructive actions via the API. The Endpoint Validation section below
describes how API endpoints are validated to ensure safety.
While this tool can execute R code, the code is evaluated in an environment
where only a limited set of functions and variables are available. In
particular, only the gh() and gh_whoami() functions from the gh package
are available, along with owner and repo variables that are pre-defined
to point to the current repository (if detected). This allows models to focus
on writing GitHub API calls without needing to load packages or manage
authentication.
Endpoint Validation


This tool uses endpoint validation to ensure only safe GitHub API operations
are performed. By default, most read operations and low-risk write operations
(like creating issues or PRs) are allowed, while dangerous operations (like
merging PRs or deleting repositories) are blocked.
To customize which endpoints are allowed or blocked, use the
btw.github.allow and btw.github.block options:
# Allow a specific endpoint
options(btw.github.allow = c(
  getOption("btw.github.allow"),
  "GET /repos/*/*/topics"
))

# Block a specific endpoint
options(btw.github.block = c(
  getOption("btw.github.block"),
  "GET /repos/*/*/branches"
))

You can also set these options in your btw.md file under the
options field:
tools: github
options:
  github:
    allow:
      - "PATCH /repos/*/*/pulls/*" # Allow converting PRs to/from draft
      - "POST /repos/*/*/git/refs" # Allow creating branches
    block:
      - "DELETE /repos/**" # Block any delete action under /repos

The precedence order for rules is:
User block rules (checked first, highest priority)
User allow rules
Built-in block rules
Built-in allow rules
Default: reject (if no rules match)



'><meta property="og:image" content="https://posit-dev.github.io/btw/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">btw</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.6.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/posit-dev/btw/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Tool: GitHub</h1>
      <small class="dont-index">Source: <a href="https://github.com/posit-dev/btw/blob/main/R/tool-github.R" class="external-link"><code>R/tool-github.R</code></a></small>
      <div class="d-none name"><code>btw_tool_github.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Execute R code that calls the GitHub API using <code><a href="https://gh.r-lib.org/reference/gh.html" class="external-link">gh::gh()</a></code>.</p>
<p>This tool is
designed such that models can write very limited R code to call <code><a href="https://gh.r-lib.org/reference/gh.html" class="external-link">gh::gh()</a></code>
and protections are inserted to prevent the model from calling unsafe or
destructive actions via the API. The <strong>Endpoint Validation</strong> section below
describes how API endpoints are validated to ensure safety.</p>
<p>While this tool <em>can</em> execute R code, the code is evaluated in an environment
where only a limited set of functions and variables are available. In
particular, only the <code>gh()</code> and <code>gh_whoami()</code> functions from the <code>gh</code> package
are available, along with <code>owner</code> and <code>repo</code> variables that are pre-defined
to point to the current repository (if detected). This allows models to focus
on writing GitHub API calls without needing to load packages or manage
authentication.</p><div class="section">
<h3 id="endpoint-validation">Endpoint Validation<a class="anchor" aria-label="anchor" href="#endpoint-validation"></a></h3>


<p>This tool uses endpoint validation to ensure only safe GitHub API operations
are performed. By default, most read operations and low-risk write operations
(like creating issues or PRs) are allowed, while dangerous operations (like
merging PRs or deleting repositories) are blocked.</p>
<p>To customize which endpoints are allowed or blocked, use the
<code>btw.github.allow</code> and <code>btw.github.block</code> options:</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="co"># Allow a specific endpoint</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>btw.github.allow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"btw.github.allow"</span><span class="op">)</span>,</span>
<span>  <span class="st">"GET /repos/*/*/topics"</span></span>
<span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Block a specific endpoint</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>btw.github.block <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"btw.github.block"</span><span class="op">)</span>,</span>
<span>  <span class="st">"GET /repos/*/*/branches"</span></span>
<span><span class="op">)</span><span class="op">)</span></span></code></pre><p></p></div>
<p>You can also set these options in your <a href="use_btw_md.html">btw.md</a> file under the
<code>options</code> field:</p>
<p></p><div class="sourceCode yaml"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">tools</span><span class="kw">:</span><span class="at"> github</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">options</span><span class="kw">:</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="at">  </span><span class="fu">github</span><span class="kw">:</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="at">    </span><span class="fu">allow</span><span class="kw">:</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">"PATCH /repos/*/*/pulls/*"</span><span class="co"> # Allow converting PRs to/from draft</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">"POST /repos/*/*/git/refs"</span><span class="co"> # Allow creating branches</span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="at">    </span><span class="fu">block</span><span class="kw">:</span></span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">"DELETE /repos/**"</span><span class="co"> # Block any delete action under /repos</span></span></code></pre><p></p></div>
<p>The precedence order for rules is:</p><ol><li><p>User block rules (checked first, highest priority)</p></li>
<li><p>User allow rules</p></li>
<li><p>Built-in block rules</p></li>
<li><p>Built-in allow rules</p></li>
<li><p>Default: reject (if no rules match)</p></li>
</ol></div>

    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">btw_tool_github</span><span class="op">(</span><span class="va">code</span>, fields <span class="op">=</span> <span class="st">"default"</span>, `_intent` <span class="op">=</span> <span class="st">""</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-code">code<a class="anchor" aria-label="anchor" href="#arg-code"></a></dt>
<dd><p>R code that calls <code>gh()</code> or <code>gh_whoami()</code>. The code will be
evaluated in an environment where <code>owner</code> and <code>repo</code> variables are
predefined (defaulting to the current repository if detected). The <code>gh()</code>
function is available without needing to load the gh package.</p></dd>


<dt id="arg-fields">fields<a class="anchor" aria-label="anchor" href="#arg-fields"></a></dt>
<dd><p>Optional character vector of GitHub API response fields to
retain. If provided, only these fields will be included in the result.
Defaults to a curated set of commonly used fields.</p></dd>


<dt id="arg--intent">_intent<a class="anchor" aria-label="anchor" href="#arg--intent"></a></dt>
<dd><p>An optional string describing the intent of the tool use.
When the tool is used by an LLM, the model will use this argument to
explain why it called the tool.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code>btw_tool_result</code> containing the result of the GitHub API call.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Get an issue</span></span></span>
<span class="r-in"><span><span class="fu">btw_tool_github</span><span class="op">(</span></span></span>
<span class="r-in"><span>  code <span class="op">=</span> <span class="st">'gh("/repos/{owner}/{repo}/issues/123", owner = owner, repo = repo)'</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create an issue</span></span></span>
<span class="r-in"><span><span class="fu">btw_tool_github</span><span class="op">(</span>code <span class="op">=</span> <span class="st">r"(</span></span></span>
<span class="r-in"><span><span class="st">  gh(</span></span></span>
<span class="r-in"><span><span class="st">    "POST /repos/{owner}/{repo}/issues",</span></span></span>
<span class="r-in"><span><span class="st">    title = \"Bug report\",</span></span></span>
<span class="r-in"><span><span class="st">    body = \"Description of bug\",</span></span></span>
<span class="r-in"><span><span class="st">    owner = owner,</span></span></span>
<span class="r-in"><span><span class="st">    repo = repo</span></span></span>
<span class="r-in"><span><span class="st">  )</span></span></span>
<span class="r-in"><span><span class="st">)"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Target a different repository</span></span></span>
<span class="r-in"><span><span class="fu">btw_tool_github</span><span class="op">(</span>code <span class="op">=</span> <span class="st">'gh("/repos/tidyverse/dplyr/issues/123")'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://garrickadenbuie.com" class="external-link">Garrick Aden-Buie</a>, <a href="https://www.simonpcouch.com/" class="external-link">Simon Couch</a>, Joe Cheng, Posit Software, PBC.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

