<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Create a btw-enhanced ellmer chat client — btw_client • btw</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Neuton-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create a btw-enhanced ellmer chat client — btw_client"><meta name="description" content="Creates an ellmer::Chat client, enhanced with the tools from
btw_tools(). Use btw_client() to create the chat client for
general or interactive use at the console, or btw_app() to create a chat
client and launch a Shiny app for chatting with a btw-enhanced LLM in your
local workspace.
Project Context


You can keep track of project-specific rules, guidance and context by adding
a btw.md file in your project directory. Any time you start a chat client
with btw_client() or launch a chat session with btw_app(), btw will
automatically find and include the contents of the btw.md file in your
chat.
Use btw.md to inform the LLM of your preferred code style, to provide
domain-specific terminology or definitions, to establish project
documentation, goals and constraints, to include reference materials such or
technical specifications, or more. Storing this kind of information in
btw.md may help you avoid repeating yourself and can be used to maintain
coherence across many chat sessions.
The btw.md file, when present, is included as part of the system prompt for
your chat conversation. You can structure the file in any way you wish.
You can also use the btw.md file to choose default chat settings for your
project in a YAML block at the top of the file. In this YAML block you can
choose the default provider, model and tools for btw_client() or
btw_app(). provider chooses the ellmer::chat_*() function, e.g.
provider: openai or provider: chat_openai to use ellmer::chat_openai().
tools chooses which btw tools are included in the chat, and all other
values are passed to the ellmer::chat_*() constructor, e.g. model: gpt-4o, seed: 42, or `echo: all“.
Here's an example btw.md file:
---
provider: claude
model: claude-3-7-sonnet-20250219
tools: [data, docs, environment]
---

Follow these important style rules for any R code in this project:

* Prefer solutions that use {tidyverse}
* Always use `&amp;lt;-` for assignment
* Always use the native base-R pipe `|&amp;gt;` for piped expressions





Client Options


btw.client: The ellmer::Chat client to use as the basis for new
btw_client() or btw_app() chats.
btw.tools: The btw tools to include by default when starting a new
btw chat, see btw_tools() for details.



"><meta property="og:description" content="Creates an ellmer::Chat client, enhanced with the tools from
btw_tools(). Use btw_client() to create the chat client for
general or interactive use at the console, or btw_app() to create a chat
client and launch a Shiny app for chatting with a btw-enhanced LLM in your
local workspace.
Project Context


You can keep track of project-specific rules, guidance and context by adding
a btw.md file in your project directory. Any time you start a chat client
with btw_client() or launch a chat session with btw_app(), btw will
automatically find and include the contents of the btw.md file in your
chat.
Use btw.md to inform the LLM of your preferred code style, to provide
domain-specific terminology or definitions, to establish project
documentation, goals and constraints, to include reference materials such or
technical specifications, or more. Storing this kind of information in
btw.md may help you avoid repeating yourself and can be used to maintain
coherence across many chat sessions.
The btw.md file, when present, is included as part of the system prompt for
your chat conversation. You can structure the file in any way you wish.
You can also use the btw.md file to choose default chat settings for your
project in a YAML block at the top of the file. In this YAML block you can
choose the default provider, model and tools for btw_client() or
btw_app(). provider chooses the ellmer::chat_*() function, e.g.
provider: openai or provider: chat_openai to use ellmer::chat_openai().
tools chooses which btw tools are included in the chat, and all other
values are passed to the ellmer::chat_*() constructor, e.g. model: gpt-4o, seed: 42, or `echo: all“.
Here's an example btw.md file:
---
provider: claude
model: claude-3-7-sonnet-20250219
tools: [data, docs, environment]
---

Follow these important style rules for any R code in this project:

* Prefer solutions that use {tidyverse}
* Always use `&amp;lt;-` for assignment
* Always use the native base-R pipe `|&amp;gt;` for piped expressions





Client Options


btw.client: The ellmer::Chat client to use as the basis for new
btw_client() or btw_app() chats.
btw.tools: The btw tools to include by default when starting a new
btw chat, see btw_tools() for details.



"><meta property="og:image" content="https://posit-dev.github.io/btw/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">btw</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.2.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/posit-dev/btw/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Create a btw-enhanced ellmer chat client</h1>
      <small class="dont-index">Source: <a href="https://github.com/posit-dev/btw/blob/main/R/btw_client.R" class="external-link"><code>R/btw_client.R</code></a></small>
      <div class="d-none name"><code>btw_client.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Creates an <a href="https://ellmer.tidyverse.org/reference/Chat.html" class="external-link">ellmer::Chat</a> client, enhanced with the tools from
<code><a href="btw_tools.html">btw_tools()</a></code>. Use <code>btw_client()</code> to create the chat client for
general or interactive use at the console, or <code>btw_app()</code> to create a chat
client and launch a Shiny app for chatting with a btw-enhanced LLM in your
local workspace.</p><div class="section">
<h3 id="project-context">Project Context<a class="anchor" aria-label="anchor" href="#project-context"></a></h3>


<p>You can keep track of project-specific rules, guidance and context by adding
a <code>btw.md</code> file in your project directory. Any time you start a chat client
with <code>btw_client()</code> or launch a chat session with <code>btw_app()</code>, btw will
automatically find and include the contents of the <code>btw.md</code> file in your
chat.</p>
<p>Use <code>btw.md</code> to inform the LLM of your preferred code style, to provide
domain-specific terminology or definitions, to establish project
documentation, goals and constraints, to include reference materials such or
technical specifications, or more. Storing this kind of information in
<code>btw.md</code> may help you avoid repeating yourself and can be used to maintain
coherence across many chat sessions.</p>
<p>The <code>btw.md</code> file, when present, is included as part of the system prompt for
your chat conversation. You can structure the file in any way you wish.</p>
<p>You can also use the <code>btw.md</code> file to choose default chat settings for your
project in a YAML block at the top of the file. In this YAML block you can
choose the default <code>provider</code>, <code>model</code> and <code>tools</code> for <code>btw_client()</code> or
<code>btw_app()</code>. <code>provider</code> chooses the <code>ellmer::chat_*()</code> function, e.g.
<code>provider: openai</code> or <code>provider: chat_openai</code> to use <code><a href="https://ellmer.tidyverse.org/reference/chat_openai.html" class="external-link">ellmer::chat_openai()</a></code>.
<code>tools</code> chooses which btw tools are included in the chat, and all other
values are passed to the <code>ellmer::chat_*()</code> constructor, e.g. <code>model: gpt-4o</code>, <code>seed: 42</code>, or `echo: all“.</p>
<p>Here's an example <code>btw.md</code> file:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="sc">---</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>provider<span class="sc">:</span> claude</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>model<span class="sc">:</span> claude<span class="dv">-3-7</span><span class="sc">-</span>sonnet<span class="dv">-20250219</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>tools<span class="sc">:</span> [data, docs, environment]</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="sc">---</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a>Follow these important style rules <span class="cf">for</span> any R code <span class="cf">in</span> this project<span class="sc">:</span></span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a><span class="er">*</span> Prefer solutions that use {tidyverse}</span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a><span class="sc">*</span> Always use <span class="st">`</span><span class="at">&lt;-</span><span class="st">`</span> <span class="cf">for</span> assignment</span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a><span class="sc">*</span> Always use the native base<span class="sc">-</span>R pipe <span class="st">`</span><span class="at">|&gt;</span><span class="st">`</span> <span class="cf">for</span> piped expressions</span>
<span id="cb1-12"><a href="#cb1-12" tabindex="-1"></a></span></code></pre><p></p></div>
</div>

<div class="section">
<h3 id="client-options">Client Options<a class="anchor" aria-label="anchor" href="#client-options"></a></h3>

<ul><li><p><code>btw.client</code>: The <a href="https://ellmer.tidyverse.org/reference/Chat.html" class="external-link">ellmer::Chat</a> client to use as the basis for new
<code>btw_client()</code> or <code>btw_app()</code> chats.</p></li>
<li><p><code>btw.tools</code>: The btw tools to include by default when starting a new
btw chat, see <code><a href="btw_tools.html">btw_tools()</a></code> for details.</p></li>
</ul></div>

    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">btw_client</span><span class="op">(</span><span class="va">...</span>, client <span class="op">=</span> <span class="cn">NULL</span>, tools <span class="op">=</span> <span class="cn">NULL</span>, path_btw <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">btw_app</span><span class="op">(</span><span class="va">...</span>, client <span class="op">=</span> <span class="cn">NULL</span>, tools <span class="op">=</span> <span class="cn">NULL</span>, path_btw <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional arguments are ignored. <code>...</code> are included for future
feature expansion.</p></dd>


<dt id="arg-client">client<a class="anchor" aria-label="anchor" href="#arg-client"></a></dt>
<dd><p>An <a href="https://ellmer.tidyverse.org/reference/Chat.html" class="external-link">ellmer::Chat</a> client, defaults to
<code><a href="https://ellmer.tidyverse.org/reference/chat_anthropic.html" class="external-link">ellmer::chat_anthropic()</a></code>. You can use the <code>btw.client</code> option to set a
default client for new <code>btw_client()</code> calls, or use a <code>btw.md</code> project file
for default chat client settings, like provider and model. We check the
<code>client</code> argument, then the <code>btw.client</code> R option, and finally the <code>btw.md</code>
project file, using only the client definition from the first of these that
is available.</p></dd>


<dt id="arg-tools">tools<a class="anchor" aria-label="anchor" href="#arg-tools"></a></dt>
<dd><p>Optional names of tools or tool groups to include in the chat
client. By default, all btw tools are included. For example, use
<code>include = "docs"</code> to include only the documentation related tools, or
<code>include = c("env", "docs")</code>, etc. <code>btw_client()</code> also supports
<code>tools = FALSE</code> to skip registering <span class="pkg">btw</span> tools with the chat client.</p></dd>


<dt id="arg-path-btw">path_btw<a class="anchor" aria-label="anchor" href="#arg-path-btw"></a></dt>
<dd><p>A path to a <code>btw.md</code> project context file. If <code>NULL</code>, btw
will find a project-specific <code>btw.md</code> file in the parents of the current
working directory.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Returns an <a href="https://ellmer.tidyverse.org/reference/Chat.html" class="external-link">ellmer::Chat</a> object with additional tools registered
from <code><a href="btw_tools.html">btw_tools()</a></code>. <code>btw_app()</code> returns the chat object invisibly, and
the chat object with the messages added during the chat session.</p>
    </div>
    <div class="section level2">
    <h2 id="functions">Functions<a class="anchor" aria-label="anchor" href="#functions"></a></h2>

<ul><li><p><code>btw_client()</code>: Create a btw-enhanced <a href="https://ellmer.tidyverse.org/reference/Chat.html" class="external-link">ellmer::Chat</a> client</p></li>
<li><p><code>btw_app()</code>: Create a btw-enhanced client and launch a Shiny app to
chat</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu">withr</span><span class="fu">::</span><span class="fu"><a href="https://withr.r-lib.org/reference/with_options.html" class="external-link">local_options</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    btw.client <span class="op">=</span> <span class="fu">ellmer</span><span class="fu">::</span><span class="fu"><a href="https://ellmer.tidyverse.org/reference/chat_ollama.html" class="external-link">chat_ollama</a></span><span class="op">(</span>model<span class="op">=</span><span class="st">"llama3.1:8b"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="va">chat</span> <span class="op">&lt;-</span> <span class="fu">btw_client</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">chat</span><span class="op">$</span><span class="fu">chat</span><span class="op">(</span><span class="st">"How can I replace `stop()` calls with functions from the cli package?"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://garrickadenbuie.com" class="external-link">Garrick Aden-Buie</a>, <a href="https://www.simonpcouch.com/" class="external-link">Simon Couch</a>, Joe Cheng, Posit Software, PBC.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer></div>





  </body></html>

