<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Create or edit a btw.md context file — use_btw_md • btw</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create or edit a btw.md context file — use_btw_md"><meta name="description" content="Create or edit a btw.md or AGENTS.md context file for your project or
user-level configuration. These functions help you set up the context files
that btw_client() and btw_app() use to configure chat clients.
use_btw_md() creates a new context file with a default template. If the
file already exists, it will not overwrite it, but will still ensure the file
is added to .Rbuildignore if you're in an R package.
edit_btw_md() opens an existing context file for editing. Without
arguments, it opens the same file that btw_client() would use by default."><meta property="og:description" content="Create or edit a btw.md or AGENTS.md context file for your project or
user-level configuration. These functions help you set up the context files
that btw_client() and btw_app() use to configure chat clients.
use_btw_md() creates a new context file with a default template. If the
file already exists, it will not overwrite it, but will still ensure the file
is added to .Rbuildignore if you're in an R package.
edit_btw_md() opens an existing context file for editing. Without
arguments, it opens the same file that btw_client() would use by default."><meta property="og:image" content="https://posit-dev.github.io/btw/logo.png"><meta name="robots" content="noindex"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">btw</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/posit-dev/btw/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Create or edit a btw.md context file</h1>
      <small class="dont-index">Source: <a href="https://github.com/posit-dev/btw/blob/main/R/edit_btw_md.R" class="external-link"><code>R/edit_btw_md.R</code></a></small>
      <div class="d-none name"><code>use_btw_md.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Create or edit a <code>btw.md</code> or <code>AGENTS.md</code> context file for your project or
user-level configuration. These functions help you set up the context files
that <code><a href="btw_client.html">btw_client()</a></code> and <code><a href="btw_client.html">btw_app()</a></code> use to configure chat clients.</p>
<p><code>use_btw_md()</code> creates a new context file with a default template. If the
file already exists, it will not overwrite it, but will still ensure the file
is added to <code>.Rbuildignore</code> if you're in an R package.</p>
<p><code>edit_btw_md()</code> opens an existing context file for editing. Without
arguments, it opens the same file that <code><a href="btw_client.html">btw_client()</a></code> would use by default.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">use_btw_md</span><span class="op">(</span>scope <span class="op">=</span> <span class="st">"project"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">edit_btw_md</span><span class="op">(</span>scope <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-scope">scope<a class="anchor" aria-label="anchor" href="#arg-scope"></a></dt>
<dd><p>The scope of the context file. Can be:</p><ul><li><p><code>"project"</code> (default): Creates/opens <code>btw.md</code> (by default) or <code>AGENTS.md</code>
in the project root</p></li>
<li><p><code>"user"</code>: Creates/opens <code>btw.md</code> in your home directory</p></li>
<li><p>A directory path: Creates/opens <code>btw.md</code> in that directory</p></li>
<li><p>A file path: Creates/opens that specific file</p></li>
</ul><p>For <code>edit_btw_md()</code>, <code>scope = NULL</code> (default) will find and open the
context file that <code><a href="btw_client.html">btw_client()</a></code> would use, searching first for <code>btw.md</code>
and then <code>AGENTS.md</code> in the project directory and then for <code>btw.md</code> in your
home directory.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p><code>use_btw_md()</code> returns the path to the context file, invisibly.
<code>edit_btw_md()</code> is called for its side effect of opening the file.</p>
    </div>
    <div class="section level2">
    <h2 id="functions">Functions<a class="anchor" aria-label="anchor" href="#functions"></a></h2>

<ul><li><p><code>use_btw_md()</code>: Create a new <code>btw.md</code> or <code>AGENTS.md</code> context file in
the current directory, the project directory or your home directory.</p></li>
<li><p><code>edit_btw_md()</code>: Open an existing <code>btw.md</code> or <code>AGENTS.md</code> context file
for editing.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="additional-examples">Additional Examples<a class="anchor" aria-label="anchor" href="#additional-examples"></a></h2>



<p></p><div class="sourceCode r"><pre><code><span><span class="co"># Create a project-level btw.md</span></span>
<span><span class="fu"><a href="../reference/use_btw_md.html">use_btw_md</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create a user-level btw.md</span></span>
<span><span class="fu"><a href="../reference/use_btw_md.html">use_btw_md</a></span><span class="op">(</span><span class="st">"user"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create an AGENTS.md file</span></span>
<span><span class="fu"><a href="../reference/use_btw_md.html">use_btw_md</a></span><span class="op">(</span><span class="st">"AGENTS.md"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Edit the context file that btw_client() would use</span></span>
<span><span class="fu"><a href="../reference/use_btw_md.html">edit_btw_md</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Edit a specific context file</span></span>
<span><span class="fu"><a href="../reference/use_btw_md.html">edit_btw_md</a></span><span class="op">(</span><span class="st">"user"</span><span class="op">)</span></span></code></pre><p></p></div>
    </div>
    <div class="section level2">
    <h2 id="project-context">Project Context<a class="anchor" aria-label="anchor" href="#project-context"></a></h2>



<p>You can use a <code>btw.md</code> or <a href="https://agents.md" class="external-link"><code>AGENTS.md</code></a> file to keep track
of project-specific rules, guidance and context in your project. Either file
name will work, so we'll refer primarily to <code>btw.md</code>. These files are used
automatically by <code><a href="btw_client.html">btw_client()</a></code> and <code><a href="btw_client.html">btw_app()</a></code>: they look first for <code>btw.md</code>
and then for <code>AGENTS.md</code>. If both files are present, only the <code>btw.md</code> file
will be used.</p>
<p>Any time you start a chat client with <code><a href="btw_client.html">btw_client()</a></code> or launch a chat session
with <code><a href="btw_client.html">btw_app()</a></code>, btw will automatically find and include the contents of the
<code>btw.md</code> or <code>AGENTS.md</code> file in the system prompt of your chat. This helps
maintain context and consistency across chat sessions.</p>
<p>Use <code>btw.md</code> to inform the LLM of your preferred code style, to provide
domain-specific terminology or definitions, to establish project
documentation, goals and constraints, to include reference materials such or
technical specifications, or more. Storing this kind of information in
<code>btw.md</code> may help you avoid repeating yourself and can be used to maintain
coherence across many chat sessions.</p>
<p>Write in markdown and structure the file in any way you wish, or use
<code><a href="btw_task_create_btw_md.html">btw_task_create_btw_md()</a></code> to help you create a project context file for an
existing project with the help of an AI agent.</p>
    </div>
    <div class="section level2">
    <h2 id="chat-settings">Chat Settings<a class="anchor" aria-label="anchor" href="#chat-settings"></a></h2>



<p>You can also use the <code>btw.md</code> file to choose default chat settings for your
project in a YAML front matter block at the top of the file. In this YAML
block you can choose settings for the default ellmer chat <code>client</code>, e.g.
<code>provider</code>, <code>model</code>, as well as choose which <code><a href="btw_tools.html">btw_tools()</a></code> to use in
<code><a href="btw_client.html">btw_client()</a></code> or <code><a href="btw_client.html">btw_app()</a></code>.</p>
<p><strong>Chat client settings</strong></p>
<p>Use the <code>client</code> field to set options for the chat client. This can be a
single string in <code>provider</code> or <code>provider/model</code> format – as used by
<code><a href="https://ellmer.tidyverse.org/reference/chat-any.html" class="external-link">ellmer::chat()</a></code> – or a list of client options with <code>provider</code> and
<code>model</code> fields, as well as any other options supported by the underlying
<code>ellmer::chat_*()</code> function you choose. Note that <code>provider</code> maps to the
<code>ellmer::chat_*()</code> function, while <code>model</code> maps to the <code>model</code> argument of
that function.</p><ul><li><p>Using ellmer's default model for a provider:</p>
<p></p><div class="sourceCode md"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="an">client:</span><span class="co"> openai</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="co">---</span></span></code></pre><p></p></div>
<p></p><div class="sourceCode md"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="an">client:</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="co">  provider: openai</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="co">---</span></span></code></pre><p></p></div></li>
<li><p>Using a specific model:</p>
<p></p><div class="sourceCode md"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="an">client:</span><span class="co"> anthropic/claude-4-5-sonnet-latest</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="co">---</span></span></code></pre><p></p></div>
<p></p><div class="sourceCode md"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="an">client:</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="co">  provider: anthropic</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="co">  model: claude-4-5-sonnet-latest</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="co">---</span></span></code></pre><p></p></div></li>
<li><p>Using additional client options:</p>
<p></p><div class="sourceCode md"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="an">client:</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="co">  provider: ollama</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="co">  model: "gpt-oss:20b"</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="co">  echo: output</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="co">  base_url: "http://my-company.example.com:11434"</span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="co">---</span></span></code></pre><p></p></div></li>
</ul><p><strong>Tool Settings</strong></p>
<p>The top-level <code>tools</code> field is used to specify which btw tools
are included in the chat. This should be a list of tool groups or tool names
(with or without the <code>btw_tool_</code> prefix). See <code><a href="btw_tools.html">btw_tools()</a></code> for a list of
available tools and tool groups.</p>
<p>Here's an example <code>btw.md</code> file:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="sc">---</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>client<span class="sc">:</span> claude<span class="sc">/</span>claude<span class="dv">-4-5</span><span class="sc">-</span>sonnet<span class="sc">-</span>latest</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>tools<span class="sc">:</span> [docs, env, files, git, ide, search, session, web]</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="sc">---</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a>Follow these important style rules when writing R code<span class="sc">:</span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a><span class="er">*</span> Prefer solutions that use {tidyverse}</span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a><span class="sc">*</span> Always use <span class="st">`</span><span class="at">&lt;-</span><span class="st">`</span> <span class="cf">for</span> assignment</span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a><span class="sc">*</span> Always use the native base<span class="sc">-</span>R pipe <span class="st">`</span><span class="at">|&gt;</span><span class="st">`</span> <span class="cf">for</span> piped expressions</span></code></pre><p></p></div>
    </div>
    <div class="section level2">
    <h2 id="selective-context">Selective Context<a class="anchor" aria-label="anchor" href="#selective-context"></a></h2>



<p>One use-case for <code>btw.md</code> is to provide stable context for an on-going task
that might span multiple chat sessions. In this case, you can use <code>btw.md</code> to
hold the complete project plan, with background information, requirements,
and specific tasks to be completed. This can help maintain continuity across
chat sessions, especially if you update the <code>btw.md</code> file as the project
progresses.</p>
<p>In this use case, however, you might want to hide parts of the project plan
from the system prompt, for example to hide completed or future tasks when
their description would distract the LLM from the current task.</p>
<p>You can hide parts of the <code>btw.md</code> file from the system prompt by wrapping
them in HTML <code>&lt;!-- HIDE --&gt;</code> and <code>&lt;!-- /HIDE --&gt;</code> comment tags. A single
<code>&lt;!-- HIDE --&gt;</code> comment tag will hide all content after it until the next
<code>&lt;!-- /HIDE --&gt;</code> tag, or the end of the file. This is particularly useful
when your system prompt contains notes to yourself or future tasks that you
do not want to be included in the system prompt.</p>
    </div>
    <div class="section level2">
    <h2 id="project-or-user-scope">Project or User Scope<a class="anchor" aria-label="anchor" href="#project-or-user-scope"></a></h2>



<p>For project-specific configuration, store your <code>btw.md</code> file in the root of
your project directory. You can even have multiple <code>btw.md</code> files in your
project, in which case the one closest to your current working directory
will be used. This makes it easy to have different <code>btw.md</code> files for
different sub-projects or sub-directories within a larger project.</p>
<p>For global configuration, you can maintain a <code>btw.md</code> file in your home
directory (at <code>btw.md</code> or <code>.config/btw/btw.md</code> in your home directory, using
<code><a href="https://fs.r-lib.org/reference/path_expand.html" class="external-link">fs::path_home()</a></code>). This file will be used by default when a project-specific
<code>btw.md</code> file is not found. Note that <span class="pkg">btw</span> only looks for <code>btw.md</code> in
your home directory if no project-specific <code>btw.md</code> or <code>AGENTS.md</code> file is
present. It also does not look for <code>AGENTS.md</code> in your home directory.</p>
    </div>
    <div class="section level2">
    <h2 id="interactive-setup">Interactive Setup<a class="anchor" aria-label="anchor" href="#interactive-setup"></a></h2>



<p>For an interactive guided setup, consider using <code><a href="btw_task_create_btw_md.html">btw_task_create_btw_md()</a></code> to use
an LLM to help you create a <code>btw.md</code> file for your project.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Project context files are discovered automatically and included in
the system prompt by <code><a href="btw_client.html">btw_client()</a></code>. See <code><a href="btw_tools.html">btw_tools()</a></code> for a list of
available tools.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># See additional examples in the sections above</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">withr</span><span class="fu">::</span><span class="fu"><a href="https://withr.r-lib.org/reference/with_tempfile.html" class="external-link">with_tempdir</a></span><span class="op">(</span><span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu">withr</span><span class="fu">::</span><span class="fu"><a href="https://withr.r-lib.org/reference/with_tempfile.html" class="external-link">with_tempfile</a></span><span class="op">(</span><span class="st">"btw_md_tmp"</span>, fileext <span class="op">=</span> <span class="st">".md"</span>, <span class="op">{</span></span></span>
<span class="r-in"><span>    <span class="fu">use_btw_md</span><span class="op">(</span><span class="va">btw_md_tmp</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">}</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Created <span style="color: #0000BB;">/tmp/RtmpnmvkHo/file229426b06278.md</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> See `?btw::btw_client()` for format details</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> See `?btw::btw_tools()` for available tools</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Call `btw::btw_task_create_btw_md()` to use an LLM to help you initialize the</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   project context.</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://garrickadenbuie.com" class="external-link">Garrick Aden-Buie</a>, <a href="https://www.simonpcouch.com/" class="external-link">Simon Couch</a>, Joe Cheng, Posit Software, PBC.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

