<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Create a custom agent tool from a markdown file — btw_agent_tool • btw</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create a custom agent tool from a markdown file — btw_agent_tool"><meta name="description" content="Creates an ellmer::tool() from a markdown file that defines a custom agent.
The tool can be registered with a chat client to delegate tasks to a
specialized assistant with its own system prompt and tool configuration.
Agent File Format


Agent files use YAML frontmatter to configure the agent, with the markdown
body becoming the agent's system prompt. The file should be named
agent-{name}.md.
Required Fields


name: A valid R identifier (letters, numbers, underscores) that becomes
part of the tool name: btw_tool_agent_{name}. The final name cannot
conflict with any existing btw_tools() names.





Optional Fields


description: Tool description shown to the LLM. Defaults to a generic
delegation message.
title: User-facing title for the tool. Defaults to title-cased name.
icon: Icon specification for the agent (see Icon Specification
below). Defaults to the standard agent icon.
client: Model specification like &quot;anthropic/claude-sonnet-4-20250514&quot;.
Falls back to btw.subagent.client or btw.client options.
tools: List of tool names or groups available to this agent. Defaults to
all non-agent tools.





Icon Specification


The icon field supports three formats:
Plain icon name: Uses shiny::icon() (Font Awesome icons). Example:
icon: robot or icon: code
Raw SVG: Starts with &amp;lt;svg and is used literally. Example:
icon: '&amp;lt;svg viewBox=&quot;0 0 24 24&quot;&amp;gt;...&amp;lt;/svg&amp;gt;'
Package-prefixed icon: Uses pkg::icon-name format to specify icons
from other icon packages. Supported packages:
PackageSyntaxFunction Called
fontawesomefontawesome::homefontawesome::fa()
bsiconsbsicons::housebsicons::bs_icon()
phosphoriconsphosphoricons::housephosphoricons::ph()
rheroiconsrheroicons::homerheroicons::rheroicon()
tablertabler::hometabler::icon()
shinyshiny::homeshiny::icon()




The specified package must be installed. If the package is missing or the
icon name is invalid, a warning is issued and the default agent icon is
used.





Example Agent File


---
name: code_reviewer
description: Reviews code for best practices and potential issues.
title: Code Reviewer
icon: magnifying-glass
tools:
  - files
  - docs
---

You are a code reviewer. Analyze code for:
- Best practices and style
- Potential bugs or issues
- Performance considerations

Provide specific, actionable feedback.







Automatic Discovery


Agent files are automatically discovered by btw_tools() when placed in
the following locations (in order of priority):
Project level (btw): .btw/agent-*.md in your project directory
User level (btw): ~/.btw/agent-*.md or ~/.config/btw/agent-*.md
Project level (Claude Code): .claude/agents/*.md in your project directory
User level (Claude Code): ~/.claude/agents/*.md


btw-style agents take precedence over Claude Code agents with the same name.
When duplicate agent names are found, a warning is issued.



Claude Code Compatibility


btw supports loading agent files from Claude Code's .claude/agents/
directory for compatibility. However, there are some small differences
when Claude Code agents are used in btw:
Name normalization: Agent names with hyphens (e.g., code-reviewer)
are automatically converted to underscores (code_reviewer) for R
compatibility.
Ignored fields: The following Claude Code fields are ignored (with
a warning): model, tools, permissionMode, skills. Use btw's
client field instead of model, and btw agents use default tools.
client argument: Use the client argument to manually override
the model for any agent file.



"><meta property="og:description" content="Creates an ellmer::tool() from a markdown file that defines a custom agent.
The tool can be registered with a chat client to delegate tasks to a
specialized assistant with its own system prompt and tool configuration.
Agent File Format


Agent files use YAML frontmatter to configure the agent, with the markdown
body becoming the agent's system prompt. The file should be named
agent-{name}.md.
Required Fields


name: A valid R identifier (letters, numbers, underscores) that becomes
part of the tool name: btw_tool_agent_{name}. The final name cannot
conflict with any existing btw_tools() names.





Optional Fields


description: Tool description shown to the LLM. Defaults to a generic
delegation message.
title: User-facing title for the tool. Defaults to title-cased name.
icon: Icon specification for the agent (see Icon Specification
below). Defaults to the standard agent icon.
client: Model specification like &quot;anthropic/claude-sonnet-4-20250514&quot;.
Falls back to btw.subagent.client or btw.client options.
tools: List of tool names or groups available to this agent. Defaults to
all non-agent tools.





Icon Specification


The icon field supports three formats:
Plain icon name: Uses shiny::icon() (Font Awesome icons). Example:
icon: robot or icon: code
Raw SVG: Starts with &amp;lt;svg and is used literally. Example:
icon: '&amp;lt;svg viewBox=&quot;0 0 24 24&quot;&amp;gt;...&amp;lt;/svg&amp;gt;'
Package-prefixed icon: Uses pkg::icon-name format to specify icons
from other icon packages. Supported packages:
PackageSyntaxFunction Called
fontawesomefontawesome::homefontawesome::fa()
bsiconsbsicons::housebsicons::bs_icon()
phosphoriconsphosphoricons::housephosphoricons::ph()
rheroiconsrheroicons::homerheroicons::rheroicon()
tablertabler::hometabler::icon()
shinyshiny::homeshiny::icon()




The specified package must be installed. If the package is missing or the
icon name is invalid, a warning is issued and the default agent icon is
used.





Example Agent File


---
name: code_reviewer
description: Reviews code for best practices and potential issues.
title: Code Reviewer
icon: magnifying-glass
tools:
  - files
  - docs
---

You are a code reviewer. Analyze code for:
- Best practices and style
- Potential bugs or issues
- Performance considerations

Provide specific, actionable feedback.







Automatic Discovery


Agent files are automatically discovered by btw_tools() when placed in
the following locations (in order of priority):
Project level (btw): .btw/agent-*.md in your project directory
User level (btw): ~/.btw/agent-*.md or ~/.config/btw/agent-*.md
Project level (Claude Code): .claude/agents/*.md in your project directory
User level (Claude Code): ~/.claude/agents/*.md


btw-style agents take precedence over Claude Code agents with the same name.
When duplicate agent names are found, a warning is issued.



Claude Code Compatibility


btw supports loading agent files from Claude Code's .claude/agents/
directory for compatibility. However, there are some small differences
when Claude Code agents are used in btw:
Name normalization: Agent names with hyphens (e.g., code-reviewer)
are automatically converted to underscores (code_reviewer) for R
compatibility.
Ignored fields: The following Claude Code fields are ignored (with
a warning): model, tools, permissionMode, skills. Use btw's
client field instead of model, and btw agents use default tools.
client argument: Use the client argument to manually override
the model for any agent file.



"><meta property="og:image" content="https://posit-dev.github.io/btw/logo.png"><meta name="robots" content="noindex"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">btw</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.1.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/posit-dev/btw/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Create a custom agent tool from a markdown file</h1>
      <small class="dont-index">Source: <a href="https://github.com/posit-dev/btw/blob/main/R/tool-agent-custom.R" class="external-link"><code>R/tool-agent-custom.R</code></a></small>
      <div class="d-none name"><code>btw_agent_tool.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Creates an <code><a href="https://ellmer.tidyverse.org/reference/tool.html" class="external-link">ellmer::tool()</a></code> from a markdown file that defines a custom agent.
The tool can be registered with a chat client to delegate tasks to a
specialized assistant with its own system prompt and tool configuration.</p><div class="section">
<h3 id="agent-file-format">Agent File Format<a class="anchor" aria-label="anchor" href="#agent-file-format"></a></h3>


<p>Agent files use YAML frontmatter to configure the agent, with the markdown
body becoming the agent's system prompt. The file should be named
<code>agent-{name}.md</code>.</p><div class="section">
<h4 id="required-fields">Required Fields<a class="anchor" aria-label="anchor" href="#required-fields"></a></h4>

<ul><li><p><code>name</code>: A valid R identifier (letters, numbers, underscores) that becomes
part of the tool name: <code>btw_tool_agent_{name}</code>. The final name cannot
conflict with any existing <code><a href="btw_tools.html">btw_tools()</a></code> names.</p></li>
</ul></div>

<div class="section">
<h4 id="optional-fields">Optional Fields<a class="anchor" aria-label="anchor" href="#optional-fields"></a></h4>

<ul><li><p><code>description</code>: Tool description shown to the LLM. Defaults to a generic
delegation message.</p></li>
<li><p><code>title</code>: User-facing title for the tool. Defaults to title-cased name.</p></li>
<li><p><code>icon</code>: Icon specification for the agent (see <strong>Icon Specification</strong>
below). Defaults to the standard agent icon.</p></li>
<li><p><code>client</code>: Model specification like <code>"anthropic/claude-sonnet-4-20250514"</code>.
Falls back to <code>btw.subagent.client</code> or <code>btw.client</code> options.</p></li>
<li><p><code>tools</code>: List of tool names or groups available to this agent. Defaults to
all non-agent tools.</p></li>
</ul></div>

<div class="section">
<h4 id="icon-specification">Icon Specification<a class="anchor" aria-label="anchor" href="#icon-specification"></a></h4>


<p>The <code>icon</code> field supports three formats:</p><ol><li><p><strong>Plain icon name</strong>: Uses <code><a href="https://rdrr.io/pkg/shiny/man/icon.html" class="external-link">shiny::icon()</a></code> (Font Awesome icons). Example:
<code>icon: robot</code> or <code>icon: code</code></p></li>
<li><p><strong>Raw SVG</strong>: Starts with <code>&lt;svg</code> and is used literally. Example:
<code>icon: '&lt;svg viewBox="0 0 24 24"&gt;...&lt;/svg&gt;'</code></p></li>
<li><p><strong>Package-prefixed icon</strong>: Uses <code>pkg::icon-name</code> format to specify icons
from other icon packages. Supported packages:</p><table class="table table"><tr><td>Package</td><td>Syntax</td><td>Function Called</td></tr><tr><td>fontawesome</td><td><code>fontawesome::home</code></td><td><code><a href="https://rstudio.github.io/fontawesome/reference/fa.html" class="external-link">fontawesome::fa()</a></code></td></tr><tr><td>bsicons</td><td><code>bsicons::house</code></td><td><code>bsicons::bs_icon()</code></td></tr><tr><td>phosphoricons</td><td><code>phosphoricons::house</code></td><td><code>phosphoricons::ph()</code></td></tr><tr><td>rheroicons</td><td><code>rheroicons::home</code></td><td><code>rheroicons::rheroicon()</code></td></tr><tr><td>tabler</td><td><code>tabler::home</code></td><td><code>tabler::icon()</code></td></tr><tr><td>shiny</td><td><code>shiny::home</code></td><td><code><a href="https://rdrr.io/pkg/shiny/man/icon.html" class="external-link">shiny::icon()</a></code></td></tr></table><p>The specified package must be installed. If the package is missing or the
icon name is invalid, a warning is issued and the default agent icon is
used.</p></li>
</ol></div>

<div class="section">
<h4 id="example-agent-file">Example Agent File<a class="anchor" aria-label="anchor" href="#example-agent-file"></a></h4>


<p></p><div class="sourceCode yaml"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> code_reviewer</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="fu">description</span><span class="kw">:</span><span class="at"> Reviews code for best practices and potential issues.</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> Code Reviewer</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="fu">icon</span><span class="kw">:</span><span class="at"> magnifying-glass</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="fu">tools</span><span class="kw">:</span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> files</span></span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> docs</span></span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a><span class="fu">You are a code reviewer. Analyze code for</span><span class="kw">:</span></span>
<span id="cb1-12"><a href="#cb1-12" tabindex="-1"></a><span class="kw">-</span><span class="at"> Best practices and style</span></span>
<span id="cb1-13"><a href="#cb1-13" tabindex="-1"></a><span class="kw">-</span><span class="at"> Potential bugs or issues</span></span>
<span id="cb1-14"><a href="#cb1-14" tabindex="-1"></a><span class="kw">-</span><span class="at"> Performance considerations</span></span>
<span id="cb1-15"><a href="#cb1-15" tabindex="-1"></a></span>
<span id="cb1-16"><a href="#cb1-16" tabindex="-1"></a><span class="at">Provide specific, actionable feedback.</span></span></code></pre><p></p></div>
</div>


</div>

<div class="section">
<h3 id="automatic-discovery">Automatic Discovery<a class="anchor" aria-label="anchor" href="#automatic-discovery"></a></h3>


<p>Agent files are automatically discovered by <code><a href="btw_tools.html">btw_tools()</a></code> when placed in
the following locations (in order of priority):</p><ul><li><p><strong>Project level (btw)</strong>: <code>.btw/agent-*.md</code> in your project directory</p></li>
<li><p><strong>User level (btw)</strong>: <code>~/.btw/agent-*.md</code> or <code>~/.config/btw/agent-*.md</code></p></li>
<li><p><strong>Project level (Claude Code)</strong>: <code>.claude/agents/*.md</code> in your project directory</p></li>
<li><p><strong>User level (Claude Code)</strong>: <code>~/.claude/agents/*.md</code></p></li>
</ul><p>btw-style agents take precedence over Claude Code agents with the same name.
When duplicate agent names are found, a warning is issued.</p>
</div>

<div class="section">
<h3 id="claude-code-compatibility">Claude Code Compatibility<a class="anchor" aria-label="anchor" href="#claude-code-compatibility"></a></h3>


<p>btw supports loading agent files from Claude Code's <code>.claude/agents/</code>
directory for compatibility. However, there are some small differences
when Claude Code agents are used in btw:</p><ul><li><p><strong>Name normalization</strong>: Agent names with hyphens (e.g., <code>code-reviewer</code>)
are automatically converted to underscores (<code>code_reviewer</code>) for R
compatibility.</p></li>
<li><p><strong>Ignored fields</strong>: The following Claude Code fields are ignored (with
a warning): <code>model</code>, <code>tools</code>, <code>permissionMode</code>, <code>skills</code>. Use btw's
<code>client</code> field instead of <code>model</code>, and btw agents use default tools.</p></li>
<li><p><strong><code>client</code> argument</strong>: Use the <code>client</code> argument to manually override
the model for any agent file.</p></li>
</ul></div>

    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">btw_agent_tool</span><span class="op">(</span><span class="va">path</span>, client <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-path">path<a class="anchor" aria-label="anchor" href="#arg-path"></a></dt>
<dd><p>Path to an agent markdown file.</p></dd>


<dt id="arg-client">client<a class="anchor" aria-label="anchor" href="#arg-client"></a></dt>
<dd><p>Optional. A client specification to override the agent's
configured client. Can be a string like
<code>"anthropic/claude-sonnet-4-20250514"</code>, an <a href="https://ellmer.tidyverse.org/reference/Chat.html" class="external-link">ellmer::Chat</a> object, or a list
with <code>provider</code> and <code>model</code> keys. If <code>NULL</code> (default), uses the <code>client</code>
field from the agent file or falls back to btw's default client resolution.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An <code><a href="https://ellmer.tidyverse.org/reference/tool.html" class="external-link">ellmer::ToolDef</a></code> object that can be registered with a chat
client, or <code>NULL</code> if the file is invalid (with a warning).</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="btw_tools.html">btw_tools()</a></code> for automatic agent discovery, <code><a href="btw_client.html">btw_client()</a></code> for
creating chat clients with tools.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Create a btw-style agent file</span></span></span>
<span class="r-in"><span><span class="fu">withr</span><span class="fu">::</span><span class="fu"><a href="https://withr.r-lib.org/reference/with_tempfile.html" class="external-link">with_tempdir</a></span><span class="op">(</span><span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="st">".btw"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/writeLines.html" class="external-link">writeLines</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>      <span class="st">"---"</span>,</span></span>
<span class="r-in"><span>      <span class="st">"name: code_reviewer"</span>,</span></span>
<span class="r-in"><span>      <span class="st">"description: Reviews code for best practices."</span>,</span></span>
<span class="r-in"><span>      <span class="st">"---"</span>,</span></span>
<span class="r-in"><span>      <span class="st">""</span>,</span></span>
<span class="r-in"><span>      <span class="st">"You are a code reviewer. Analyze code for best practices."</span></span></span>
<span class="r-in"><span>    <span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="st">".btw/agent-code_reviewer.md"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="va">tool</span> <span class="op">&lt;-</span> <span class="fu">btw_agent_tool</span><span class="op">(</span><span class="st">".btw/agent-code_reviewer.md"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="co"># Use `chat$register_tool(tool)` to register with an ellmer chat client</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="va">tool</span></span></span>
<span class="r-in"><span><span class="op">}</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> # &lt;ellmer::ToolDef&gt; btw_tool_agent_code_reviewer(prompt, session_id)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> # @name: btw_tool_agent_code_reviewer</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> # @description: Reviews code for best practices.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> # @convert: TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> #</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> function (prompt, session_id = NULL) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     btw_tool_agent_custom_impl(prompt = prompt, session_id = session_id, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         agent_config = agent_config)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;bytecode: 0x56197bd6ce00&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;environment: 0x56197bd6d1f0&gt;</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create a Claude Code-style agent file (name with hyphens)</span></span></span>
<span class="r-in"><span><span class="fu">withr</span><span class="fu">::</span><span class="fu"><a href="https://withr.r-lib.org/reference/with_tempfile.html" class="external-link">with_tempdir</a></span><span class="op">(</span><span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="st">".claude/agents"</span>, recursive <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/writeLines.html" class="external-link">writeLines</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>      <span class="st">"---"</span>,</span></span>
<span class="r-in"><span>      <span class="st">"name: test-helper"</span>,</span></span>
<span class="r-in"><span>      <span class="st">"description: Helps write tests."</span>,</span></span>
<span class="r-in"><span>      <span class="st">"model: sonnet"</span>,</span></span>
<span class="r-in"><span>      <span class="st">"---"</span>,</span></span>
<span class="r-in"><span>      <span class="st">""</span>,</span></span>
<span class="r-in"><span>      <span class="st">"You help write tests for R code."</span></span></span>
<span class="r-in"><span>    <span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="st">".claude/agents/test-helper.md"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="va">tool</span> <span class="op">&lt;-</span> <span class="fu">btw_agent_tool</span><span class="op">(</span><span class="st">".claude/agents/test-helper.md"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="co"># Use `chat$register_tool(tool)` to register with an ellmer chat client</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="va">tool</span></span></span>
<span class="r-in"><span><span class="op">}</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> # &lt;ellmer::ToolDef&gt; btw_tool_agent_test_helper(prompt, session_id)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> # @name: btw_tool_agent_test_helper</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> # @description: Helps write tests.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> # @convert: TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> #</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> function (prompt, session_id = NULL) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     btw_tool_agent_custom_impl(prompt = prompt, session_id = session_id, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         agent_config = agent_config)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;bytecode: 0x56197bd6ce00&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;environment: 0x5619805b2070&gt;</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://garrickadenbuie.com" class="external-link">Garrick Aden-Buie</a>, <a href="https://www.simonpcouch.com/" class="external-link">Simon Couch</a>, Joe Cheng, Posit Software, PBC.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

